(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{283:function(t,e,n){"use strict";n.r(e);var a=n(14),s=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("uni.getLocation用于获取当前用户的地理位置、速度。当用户离开小程序后，此接口无法调用。开启高精度定位，接口耗时会增加，可指定 highAccuracyExpireTime 作为超时时间。地图相关使用的坐标格式应为 gcj02。下面简单介绍怎样在uni-app项目中使用uni.getLocation;")]),t._v(" "),e("h1",{attrs:{id:"配置manifest-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置manifest-json"}},[t._v("#")]),t._v(" 配置manifest.json")]),t._v(" "),e("p",[t._v('因为getLocation的使用有点特殊，必须要在调用前需要用户授权（scope.userLocation），因此我们在manifest.json里面找到"mp-weixin"且在"mp-weixin":{}进行配置，配置完成后我们就可以愉快的在真机上使用uni.getLocation了；')]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('  "permission": {\n\t\t\t"scope.userLocation": {\n\t\t\t\t"desc": "你的位置信息将用于小程序位置接口的效果展示" \n\t\t\t}\n\t\t},\n')])])]),e("p",[e("strong",[t._v("desc：用于描述获取你的地理位置的原由")]),t._v(" "),e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/7635118-309ea44a151acc40.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"WechatIMG204.jpeg"}})]),t._v(" "),e("h1",{attrs:{id:"举个页面中使用的🌰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#举个页面中使用的🌰"}},[t._v("#")]),t._v(" 举个页面中使用的🌰：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("uni.getLocation({\n   type: 'gcj02',  // 默认值为wgs84；可选值（ 1.wgs84 返回 gps 坐标，2.gcj02 返回可用于 wx.openLocation 的坐标）\n    wgs84: false, // 传入 true 会返回高度信息，由于获取高度需要较高精确度，会减慢接口返回速度\n    sHighAccuracy: false, // 开启高精度定位\n    highAccuracyExpireTime: 3000, //高精度定位超时时间(ms)，指定时间内返回最高精度，该值3000ms以上高精度定位才有效果\n    success: function (res) {\n      console.log('成功获取位置信息',res)\n    },\n    fail: function (error) {\n        console.log('获取当前位置失败',error)\n    },\n    complete: function(com){\n      console.log('接口调用结束的回调函数（调用成功、失败都会执行）',com)     \n   }\n });\n")])])]),e("p",[t._v("个人建议把获取当前定位的API使用new Promise封装起来使用，避免代码多次重复，(或者各位大神有更好的方法，麻烦评论一下，给大家参考一下，让我们在敲码的路上潇潇洒洒👀)例如：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("function getLocationFun() {\n  return new Promise((resolve, reject) => {\n    uni.getLocation({\n      type: 'gcj02',\n      success: function (res) {\n        resolve(res)\n      },\n      fail: function (error) {\n        console.log('执行',error)\n        reject(error)\n      }\n    });\n  })\n\n}\n")])])]),e("h1",{attrs:{id:"附上获取当前位置成功后返回的参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#附上获取当前位置成功后返回的参数"}},[t._v("#")]),t._v(" 附上获取当前位置成功后返回的参数")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/7635118-c109342a6751e1ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),t._v(" "),e("p",[t._v("以免因小弟浅薄的理解误导大家，最后附上uni-app关于获取当前位置的文档，具体的大家也可以去官网文档了解：https://uniapp.dcloud.io/api/location/location?id=getlocation")])])}),[],!1,null,null,null);e.default=s.exports}}]);