uni.getLocationç”¨äºè·å–å½“å‰ç”¨æˆ·çš„åœ°ç†ä½ç½®ã€é€Ÿåº¦ã€‚å½“ç”¨æˆ·ç¦»å¼€å°ç¨‹åºåï¼Œæ­¤æ¥å£æ— æ³•è°ƒç”¨ã€‚å¼€å¯é«˜ç²¾åº¦å®šä½ï¼Œæ¥å£è€—æ—¶ä¼šå¢åŠ ï¼Œå¯æŒ‡å®š highAccuracyExpireTime ä½œä¸ºè¶…æ—¶æ—¶é—´ã€‚åœ°å›¾ç›¸å…³ä½¿ç”¨çš„åæ ‡æ ¼å¼åº”ä¸º gcj02ã€‚ä¸‹é¢ç®€å•ä»‹ç»æ€æ ·åœ¨uni-appé¡¹ç›®ä¸­ä½¿ç”¨uni.getLocation;
# é…ç½®manifest.json
  å› ä¸ºgetLocationçš„ä½¿ç”¨æœ‰ç‚¹ç‰¹æ®Šï¼Œå¿…é¡»è¦åœ¨è°ƒç”¨å‰éœ€è¦ç”¨æˆ·æˆæƒï¼ˆscope.userLocationï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åœ¨manifest.jsoné‡Œé¢æ‰¾åˆ°"mp-weixin"ä¸”åœ¨"mp-weixin":{}è¿›è¡Œé…ç½®ï¼Œé…ç½®å®Œæˆåæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„åœ¨çœŸæœºä¸Šä½¿ç”¨uni.getLocationäº†ï¼›
```
  "permission": {
			"scope.userLocation": {
				"desc": "ä½ çš„ä½ç½®ä¿¡æ¯å°†ç”¨äºå°ç¨‹åºä½ç½®æ¥å£çš„æ•ˆæœå±•ç¤º" 
			}
		},
```
**descï¼šç”¨äºæè¿°è·å–ä½ çš„åœ°ç†ä½ç½®çš„åŸç”±**
![An image](./uni_map_example1.jpeg)


# ä¸¾ä¸ªé¡µé¢ä¸­ä½¿ç”¨çš„ğŸŒ°ï¼š
```
uni.getLocation({
   type: 'gcj02',  // é»˜è®¤å€¼ä¸ºwgs84ï¼›å¯é€‰å€¼ï¼ˆ 1.wgs84 è¿”å› gps åæ ‡ï¼Œ2.gcj02 è¿”å›å¯ç”¨äº wx.openLocation çš„åæ ‡ï¼‰
    wgs84: false, // ä¼ å…¥ true ä¼šè¿”å›é«˜åº¦ä¿¡æ¯ï¼Œç”±äºè·å–é«˜åº¦éœ€è¦è¾ƒé«˜ç²¾ç¡®åº¦ï¼Œä¼šå‡æ…¢æ¥å£è¿”å›é€Ÿåº¦
    sHighAccuracy: false, // å¼€å¯é«˜ç²¾åº¦å®šä½
    highAccuracyExpireTime: 3000, //é«˜ç²¾åº¦å®šä½è¶…æ—¶æ—¶é—´(ms)ï¼ŒæŒ‡å®šæ—¶é—´å†…è¿”å›æœ€é«˜ç²¾åº¦ï¼Œè¯¥å€¼3000msä»¥ä¸Šé«˜ç²¾åº¦å®šä½æ‰æœ‰æ•ˆæœ
    success: function (res) {
      console.log('æˆåŠŸè·å–ä½ç½®ä¿¡æ¯',res)
    },
    fail: function (error) {
        console.log('è·å–å½“å‰ä½ç½®å¤±è´¥',error)
    },
    complete: function(com){
      console.log('æ¥å£è°ƒç”¨ç»“æŸçš„å›è°ƒå‡½æ•°ï¼ˆè°ƒç”¨æˆåŠŸã€å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼‰',com)     
   }
 });
```
ä¸ªäººå»ºè®®æŠŠè·å–å½“å‰å®šä½çš„APIä½¿ç”¨new Promiseå°è£…èµ·æ¥ä½¿ç”¨ï¼Œé¿å…ä»£ç å¤šæ¬¡é‡å¤ï¼Œ(æˆ–è€…å„ä½å¤§ç¥æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œéº»çƒ¦è¯„è®ºä¸€ä¸‹ï¼Œç»™å¤§å®¶å‚è€ƒä¸€ä¸‹ï¼Œè®©æˆ‘ä»¬åœ¨æ•²ç çš„è·¯ä¸Šæ½‡æ½‡æ´’æ´’ğŸ‘€)ä¾‹å¦‚ï¼š
```
function getLocationFun() {
  return new Promise((resolve, reject) => {
    uni.getLocation({
      type: 'gcj02',
      success: function (res) {
        resolve(res)
      },
      fail: function (error) {
        console.log('æ‰§è¡Œ',error)
        reject(error)
      }
    });
  })

}
```
# é™„ä¸Šè·å–å½“å‰ä½ç½®æˆåŠŸåè¿”å›çš„å‚æ•°
![An image](./uni_map_example2.png)

ä»¥å…å› å°å¼Ÿæµ…è–„çš„ç†è§£è¯¯å¯¼å¤§å®¶ï¼Œæœ€åé™„ä¸Šuni-appå…³äºè·å–å½“å‰ä½ç½®çš„æ–‡æ¡£ï¼Œå…·ä½“çš„å¤§å®¶ä¹Ÿå¯ä»¥å»å®˜ç½‘æ–‡æ¡£äº†è§£ï¼šhttps://uniapp.dcloud.io/api/location/location?id=getlocation